<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Rainwater Harvesting Calculator - RainVault</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;700;900&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
        /* CSS styles remain the same from the original file */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .floating-drop {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, rgba(17, 147, 212, 0.1), rgba(17, 147, 212, 0.3));
            border-radius: 50% 50% 50% 0;
            animation: float 6s ease-in-out infinite;
        }

        .floating-drop-1 {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-drop-2 {
            top: 60%;
            left: 80%;
            animation-delay: 2s;
        }

        .floating-drop-3 {
            top: 80%;
            left: 20%;
            animation-delay: 4s;
        }

        .floating-circle {
            position: absolute;
            background: linear-gradient(45deg, rgba(17, 147, 212, 0.05), rgba(17, 147, 212, 0.15));
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
        }

        .floating-circle-1 {
            width: 40px;
            height: 40px;
            top: 30%;
            right: 15%;
            animation-delay: 1s;
        }

        .floating-circle-2 {
            width: 60px;
            height: 60px;
            bottom: 20%;
            left: 70%;
            animation-delay: 3s;
        }

        .floating-wave {
            position: absolute;
            width: 100px;
            height: 20px;
            background: linear-gradient(90deg, rgba(17, 147, 212, 0.1), rgba(17, 147, 212, 0.2));
            border-radius: 50px;
            animation: wave 10s ease-in-out infinite;
        }

        .floating-wave-1 {
            top: 40%;
            left: 5%;
            animation-delay: 0.5s;
        }

        .floating-wave-2 {
            bottom: 30%;
            right: 10%;
            animation-delay: 2.5s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(0px) scaleX(1); }
            50% { transform: translateX(20px) scaleX(1.1); }
        }

        .animate-slide-in {
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease-out forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animated-calculator-icon svg {
            animation: bounce 2s ease-in-out infinite;
        }

        .animated-results-icon svg {
            animation: rotate 3s linear infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .results-card {
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(45deg, rgba(17, 147, 212, 0.1), rgba(17, 147, 212, 0.3)) border-box;
        }

        .dark .results-card {
            background: linear-gradient(rgb(16, 28, 34), rgb(16, 28, 34)) padding-box,
                        linear-gradient(45deg, rgba(17, 147, 212, 0.1), rgba(17, 147, 212, 0.3)) border-box;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#1193d4",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101c22",
                        "text-light": "#111618",
                        "text-dark": "#f0f3f4",
                        "subtle-light": "#617c89",
                        "subtle-dark": "#a1b4c1",
                        "border-light": "#dbe2e6",
                        "border-dark": "#2a3b47",
                        'blue-card': '#e3f2fd',
                        'green-card': '#e8f5e9',
                        'orange-card': '#fff3e0',
                        'purple-card': '#f3e5f5',
                    },
                    fontFamily: {
                        display: ["Public Sans"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        lg: "0.75rem",
                        xl: "1rem",
                        full: "9999px"
                    },
                },
            },
        };
    </script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
    <div id="mobile-menu-overlay" class="mobile-menu fixed inset-0 bg-black/50 z-40 opacity-0 invisible transition-all duration-300" onclick="toggleMobileMenu()"></div>
    
    <div id="mobile-menu" class="mobile-menu fixed top-0 right-0 h-full w-72 bg-white dark:bg-background-dark shadow-lg z-50 transform translate-x-full transition-transform duration-300">
        <div class="p-6">
            <button onclick="toggleMobileMenu()" class="mb-6 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <nav class="flex flex-col space-y-6">
                <a href="home.html" class="text-gray-700 dark:text-gray-300 hover:text-primary transition-colors text-lg py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">Home</a>
                <a href="about.html" class="text-gray-700 dark:text-gray-300 hover:text-primary transition-colors text-lg py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">About</a>
                <a href="calculate.html" class="text-primary font-bold text-lg py-2 px-3 rounded-lg bg-primary/10">Calculator</a>
                <a href="contact.html" class="text-gray-700 dark:text-gray-300 hover:text-primary transition-colors text-lg py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">Contact</a>
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <a href="calculate.html" class="bg-primary text-white text-center font-bold py-3 px-4 rounded-lg hover:bg-opacity-90 transition-all block">Get Started</a>
                </div>
            </nav>
        </div>
    </div>

    <div class="floating-elements">
        <div class="floating-drop floating-drop-1"></div>
        <div class="floating-drop floating-drop-2"></div>
        <div class="floating-drop floating-drop-3"></div>
        <div class="floating-circle floating-circle-1"></div>
        <div class="floating-circle floating-circle-2"></div>
        <div class="floating-wave floating-wave-1"></div>
        <div class="floating-wave floating-wave-2"></div>
    </div>

    <div class="flex min-h-screen w-full flex-col">
        <header class="sticky top-0 z-20 w-full border-b border-border-light bg-background-light/80 backdrop-blur-sm dark:border-border-dark dark:bg-background-dark/80">
            <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
                <div class="flex items-center gap-2 sm:gap-3">
                    <div class="size-8 sm:size-10 text-primary">
                        <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zM12 3.27L19 6.31v4.69c0 4.52-3.04 8.78-7 9.73-3.96-.95-7-5.21-7-9.73V6.31l7-3.04z"/>
                            <circle cx="12" cy="11" r="3"/>
                            <path d="M12 6v2M12 16v2M6.34 8.34l1.41 1.41M16.24 8.34l-1.41 1.41M6.34 15.66l1.41-1.41M16.24 15.66l-1.41-1.41"/>
                        </svg>
                    </div>
                    <h1 class="text-xl sm:text-2xl font-bold">RainVault</h1>
                </div>
                <nav class="hidden items-center gap-6 md:flex">
                    <a class="text-sm font-medium text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="home.html">Home</a>
                    <a class="text-sm font-medium text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="about.html">About</a>
                    <a class="text-sm font-bold text-primary" href="calculate.html">Calculator</a>
                    <a class="text-sm font-medium text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="contact.html">Contact</a>
                </nav>
                <button class="hidden min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full bg-primary px-4 py-2 text-sm font-bold text-white transition-opacity hover:opacity-90 md:flex" onclick="window.location.href='calculate.html'">
                    <span class="truncate">Get Started</span>
                </button>
                <button class="md:hidden text-gray-600 dark:text-gray-400 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M4 6h16M4 12h16m-7 6h7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                    </svg>
                </button>
            </div>
        </header>
        
        <main class="flex-1">
            <div class="mx-auto max-w-6xl px-4 py-8 sm:py-12 sm:px-6 lg:px-8 lg:py-16">
                <div class="space-y-8 lg:grid lg:grid-cols-2 lg:gap-16 lg:space-y-0">
                    <div class="order-1 lg:order-1">
                        <div class="space-y-6 sm:space-y-8">
                            <div class="space-y-4">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="animated-calculator-icon">
                                        <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H9c-.6 0-1-.4-1-1s.4-1 1-1h5c.6 0 1 .4 1 1s-.4 1-1 1zm3-4H7c-.6 0-1-.4-1-1s.4-1 1-1h10c.6 0 1 .4 1 1s-.4 1-1 1zm0-4H7c-.6 0-1-.4-1-1s.4-1 1-1h10c.6 0 1 .4 1 1s-.4 1-1 1z"/>
                                        </svg>
                                    </div>
                                </div>
                                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight animate-slide-in" style="animation-delay: 0.1s;">Advanced Rainwater Calculator</h2>
                                <p class="text-subtle-light dark:text-subtle-dark text-base sm:text-lg animate-slide-in" style="animation-delay: 0.2s;">
                                    Get precise rainwater harvesting estimates with our comprehensive calculator. Input your property details for accurate results.
                                </p>
                            </div>
                            
                            <form id="calculator-form" class="space-y-6">
                                <div class="space-y-3 animate-slide-in" style="animation-delay: 0.25s;">
                                    <label class="text-sm font-medium flex items-center gap-2" for="stateSelect">
                                        <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                        Select Your State
                                    </label>
                                    <select class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:focus:border-primary text-base" id="stateSelect" required>
                                        <option value="" disabled selected>-- Select a State --</option>
                                    </select>
                                </div>

                                <div class="space-y-3 animate-slide-in" style="animation-delay: 0.3s;">
                                    <label class="text-sm font-medium flex items-center gap-2" for="districtSelect">
                                        <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                        </svg>
                                        District:
                                    </label>
                                    <select class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:focus:border-primary text-base" id="districtSelect" required disabled>
                                        <option value="" disabled selected>-- Select a District --</option>
                                    </select>
                                </div>
                                
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div class="space-y-3 animate-slide-in" style="animation-delay: 0.4s;">
                                        <label class="text-sm font-medium flex items-center gap-2" for="roof-area">
                                            <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                                            </svg>
                                            Rooftop area (m²):
                                        </label>
                                        <input class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light placeholder-subtle-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:placeholder-subtle-dark dark:focus:border-primary text-base" id="roof-area" placeholder="e.g., 100" type="number" min="1" required/>
                                    </div>

                                    <div class="space-y-3 animate-slide-in" style="animation-delay: 0.45s;">
                                        <label class="text-sm font-medium flex items-center gap-2" for="open-area">
                                            <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                            Open space (m²):
                                        </label>
                                        <input class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light placeholder-subtle-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:placeholder-subtle-dark dark:focus:border-primary text-base" id="open-area" placeholder="e.g., 50" type="number" min="0"/>
                                    </div>
                                </div>

                                <div class="space-y-3 animate-slide-in" style="animation-delay: 0.5s;">
                                    <label class="text-sm font-medium flex items-center gap-2" for="rooftop-type">
                                        <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3L17 8z"/>
                                        </svg>
                                        Roof Type:
                                    </label>
                                    <select class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:focus:border-primary text-base" id="rooftop-type" required>
                                        <option value="">Select rooftop material</option>
                                        <option value="concrete">Concrete</option>
                                        <option value="metal">Metal</option>
                                        <option value="tile">Tile</option>
                                        <option value="green">Green</option>
                                        <option value="asphalt">Asphalt</option>
                                    </select>
                                </div>

                                <div class="space-y-3 animate-slide-in" style="animation-delay: 0.55s;">
                                    <label class="text-sm font-medium flex items-center gap-2" for="people-count">
                                        <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.5 7h-5c-.83 0-1.5.67-1.5 1.5v3c0 1.1.9 2 2 2h2V22h4zM12.5 11.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5S11 9.17 11 10s.67 1.5 1.5 1.5zm1.5 1h-4c-.83 0-1.5.67-1.5 1.5v6c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5v-6c0-.83-.67-1.5-1.5-1.5zM5.5 12.5C5.67 12.5 5 13.17 5 14v6c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-6c0-.83-.67-1.5-1.5-1.5z"/>
                                        </svg>
                                        People:
                                    </label>
                                    <input class="form-input w-full rounded-lg border-border-light bg-white p-4 text-text-light placeholder-subtle-light transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/50 dark:border-border-dark dark:bg-background-dark dark:text-text-dark dark:placeholder-subtle-dark dark:focus:border-primary text-base" id="people-count" placeholder="e.g., 4" type="number" min="1" max="50" required/>
                                </div>

                                <button class="w-full cursor-pointer items-center justify-center rounded-lg bg-primary px-6 py-4 text-lg font-bold text-white shadow-sm transition-all duration-300 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background-light dark:focus:ring-offset-background-dark transform hover:scale-105" type="submit">
                                    <span class="flex items-center justify-center gap-2">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01m3-4h.01m-3 0h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        Calculate
                                    </span>
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="order-2 lg:order-2">
                        <div class="space-y-6 sm:space-y-8">
                            <div class="space-y-4 animate-slide-in" style="animation-delay: 0.8s;">
                                <div class="flex items-center gap-3">
                                    <div class="animated-results-icon">
                                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"/>
                                        </svg>
                                    </div>
                                    <h3 class="text-xl sm:text-2xl font-bold">Results Dashboard</h3>
                                </div>
                                <div id="results-dashboard-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div class="space-y-4 rounded-lg border-2 border-blue-200 bg-blue-card p-4 sm:p-6 shadow-md transition-all duration-300 dark:border-blue-800 dark:bg-background-dark/50 results-card sm:col-span-2">
                                        <div class="text-sm text-subtle-light dark:text-subtle-dark space-y-2">
                                            <p class="font-medium text-lg">Results will appear here...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="bg-background-light dark:bg-background-dark">
            <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
                <div class="flex flex-col items-center justify-between gap-4 border-t border-border-light pt-6 sm:pt-8 dark:border-border-dark sm:flex-row">
                    <p class="text-sm text-subtle-light dark:text-subtle-dark">© 2025 RainVault. All rights reserved.</p>
                    <div class="flex items-center gap-4 sm:gap-6">
                        <a class="text-sm text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="#">Privacy Policy</a>
                        <a class="text-sm text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="#">Terms of Service</a>
                        <a class="text-sm text-subtle-light transition-colors hover:text-primary dark:text-subtle-dark dark:hover:text-primary" href="contact.html">Contact Us</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        const stateDistrictData = {
            "Andhra Pradesh": [
                "Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool",
                "Nellore", "Prakasam", "Srikakulam", "Visakhapatnam", "Vizianagaram",
                "West Godavari", "YSR Kadapa"
            ],
            "Arunachal Pradesh": [
                "Anjaw", "Changlang", "Dibang Valley", "East Kameng", "East Siang",
                "Kra Daadi", "Kurung Kumey", "Leparada", "Lohit", "Longding", "Lower Dibang Valley",
                "Lower Subansiri", "Namsai", "Pakke-Kessang", "Papum Pare", "Shi Yomi", "Siang",
                "Tawang", "Tirap", "Upper Siang", "Upper Subansiri", "West Kameng", "West Siang"
            ],
            "Assam": [
                "Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo",
                "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Dima Hasao",
                "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup",
                "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur",
                "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur",
                "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"
            ],
            "Bihar": [
                "Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur",
                "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj",
                "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj",
                "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur",
                "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa",
                "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan",
                "Supaul", "Vaishali", "West Champaran"
            ],
            "Chhattisgarh": [
                "Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur",
                "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Janjgir-Champa",
                "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Koriya",
                "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur",
                "Rajnandgaon", "Sukma", "Surajpur", "Surguja"
            ],
            "Goa": [
                "North Goa", "South Goa"
            ],
            "Gujarat": [
                "Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch",
                "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka",
                "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch",
                "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal",
                "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar",
                "Tapi", "Vadodara", "Valsad"
            ],
            "Haryana": [
                "Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad",
                "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal",
                "Kurukshetra", "Mahendragarh", "Mewat", "Palwal", "Panchkula",
                "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"
            ],
            "Himachal Pradesh": [
                "Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu",
                "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"
            ],
            "Jammu and Kashmir": [
                "Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal",
                "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama",
                "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"
            ],
            "Jharkhand": [
                "Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum",
                "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara",
                "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu",
                "Ramgarh", "Ranchi", "Sahebganj", "Seraikela Kharsawan", "Simdega",
                "West Singhbhum"
            ],
            "Karnataka": [
                "Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban",
                "Bidar", "Chamarajanagar", "Chikkaballapur", "Chikkamagaluru",
                "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag",
                "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya",
                "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi",
                "Uttara Kannada", "Vijayapura", "Yadgir"
            ],
            "Kerala": [
                "Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam",
                "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta",
                "Thiruvananthapuram", "Thrissur", "Wayanad"
            ],
            "Ladakh": [
                "Kargil", "Leh"
            ],
            "Lakshadweep": [
                "Lakshadweep"
            ],
            "Maharashtra": [
                "Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara",
                "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli",
                "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburb",
                "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar",
                "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara",
                "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"
            ],
            "Manipur": [
                "Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West",
                "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl",
                "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"
            ],
            "Meghalaya": [
                "East Garo Hills", "East Jaintia Hills", "East Khasi Hills",
                "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills",
                "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills",
                "West Khasi Hills"
            ],
            "Nagaland": [
                "Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon",
                "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"
            ],
            "Odisha": [
                "Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh",
                "Cuttack", "Debagarh", "Dhenkanal", "Gajapati", "Ganjam",
                "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal",
                "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri",
                "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri",
                "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"
            ],
            "Punjab": [
                "Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib",
                "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar",
                "Kapurthala", "Ludhiana", "Mansa", "Moga", "Muktsar", "Pathankot",
                "Patiala", "Rupnagar", "Sahibzada Ajit Singh Nagar", "Sangrur",
                "Shahid Bhagat Singh Nagar", "Tarn Taran"
            ],
            "Rajasthan": [
                "Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara",
                "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur",
                "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore",
                "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur",
                "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar",
                "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"
            ],
            "Sikkim": [
                "East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"
            ],
            "Tamil Nadu": [
                "Erode", "Kallakurichi", "Kanchipuram", "Kanyakumari", "Karur",
                "Krishnagiri", "Madurai", "Nagapattinam", "Namakkal", "Nilgiris",
                "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem",
                "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi",
                "Tiruchirappalli", "Tirunelveli", "Tirupattur", "Tiruppur",
                "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram",
                "Virudhunagar"
            ],
            "Telangana": [
                "Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon",
                "Jayashankar Bhupalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar",
                "Khammam", "Mahabubnagar", "Medak", "Medchal–Malkajgiri", "Nagarkurnool",
                "Nalgonda", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla",
                "Rangareddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad",
                "Warangal (Rural)", "Warangal (Urban)", "Yadadri Bhuvanagiri"
            ],
            "Tripura": [
                "Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala",
                "South Tripura", "Unakoti", "West Tripura"
            ],
            "Uttar Pradesh": [
                "Agra", "Aligarh", "Ambedkar Nagar", "Amethi", "Amroha", "Auraiya",
                "Ayodhya", "Azamgarh", "Baghpat", "Bahraich", "Ballia", "Balrampur",
                "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor",
                "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah",
                "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddh Nagar",
                "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur",
                "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj",
                "Kanpur Dehat", "Kanpur Nagar", "Kasganj", "Kaushambi", "Kheri",
                "Kushinagar", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba",
                "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad",
                "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Raebareli",
                "Rampur", "Saharanpur", "Sambhal", "Sant Kabir Nagar", "Shahjahanpur",
                "Shamli", "Shrawasti", "Siddharthnagar", "Sitapur", "Sonbhadra",
                "Sultanpur", "Unnao", "Varanasi"
            ],
            "Uttarakhand": [
                "Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar",
                "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag",
                "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"
            ],
            "West Bengal": [
                "Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur",
                "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong",
                "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas",
                "Paschim Bardhaman", "Paschim Medinipur", "Purba Bardhaman",
                "Purba Medinipur", "Purulia", "South 24 Parganas", "Uttar Dinajpur"
            ],
            "Delhi": [
                "Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi",
                "North West Delhi", "Shahdara", "South Delhi", "South East Delhi",
                "South West Delhi", "West Delhi"
            ],
            "Puducherry": [
                "Karaikal", "Mahe", "Puducherry", "Yanam"
            ],
            "Dadra and Nagar Haveli and Daman and Diu": [
                "Dadra and Nagar Haveli", "Daman", "Diu"
            ],
            "Andaman and Nicobar Islands": [
                "Nicobar", "North and Middle Andaman", "South Andaman"
            ],
            "Chandigarh": [
                "Chandigarh"
            ]
        };

        const stateSelect = document.getElementById('stateSelect');
        const districtSelect = document.getElementById('districtSelect');

        function populateStates() {
            const states = Object.keys(stateDistrictData).sort();
            states.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateSelect.appendChild(option);
            });
        }

        stateSelect.addEventListener('change', () => {
            const selectedState = stateSelect.value;
            districtSelect.innerHTML = '<option value="" disabled selected>-- Select a District --</option>';

            if (selectedState) {
                const districts = stateDistrictData[selectedState].sort();
                districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
                districtSelect.disabled = false;
            } else {
                districtSelect.disabled = true;
            }
        });

        populateStates();

        async function calculateAdvancedRainwaterHarvesting(event) {
            event.preventDefault();

            const form = document.getElementById('calculator-form');
            const submitButton = form.querySelector('button[type="submit"]');

            const district = document.getElementById('districtSelect').value;
            const rooftopArea = parseFloat(document.getElementById('roof-area').value);
            const peopleCount = parseInt(document.getElementById('people-count').value);
            const rooftopType = document.getElementById('rooftop-type').value;
            const openArea = parseFloat(document.getElementById('open-area').value) || 0;
            
            const originalContent = submitButton.innerHTML;
            submitButton.innerHTML = `
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Calculating...
            `;
            submitButton.disabled = true;

            const payload = {
                district: district,
                rooftop_area_sqm: rooftopArea,
                people: peopleCount,
                open_space_sqm: openArea,
                roof_type: rooftopType,
            };

            try {
                const response = await fetch('http://localhost:8000/estimate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                updateResultsDashboards(data);
                showSuccessMessage();

            } catch (error) {
                console.error('API call failed:', error);
                showModal('Error', 'Failed to get results from the server. Please check your inputs and ensure the server is running.');
            } finally {
                submitButton.innerHTML = originalContent;
                submitButton.disabled = false;
            }
        }
        
        function updateResultsDashboards(apiData) {
            const container = document.getElementById('results-dashboard-container');
            if (!container) return;
            container.innerHTML = '';
            
            // 1. Rainfall & Feasibility Dashboard
            const rainfallCard = document.createElement('div');
            rainfallCard.className = 'space-y-4 rounded-lg border-2 border-blue-200 bg-blue-card p-4 sm:p-6 shadow-md transition-all duration-300 dark:border-blue-800 dark:bg-background-dark/50 results-card';
            rainfallCard.innerHTML = `
                <h4 class="text-lg font-bold mb-2 flex items-center gap-2 text-blue-600 dark:text-blue-400">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12,3.77L11.25,4.61C11.25,4.61 9.97,6.06 8.68,7.94C7.39,9.82 6.25,12.15 6.25,14.5A5.75,5.75 0 0,0 12,20.25A5.75,5.75 0 0,0 17.75,14.5C17.75,12.15 16.61,9.82 15.32,7.94C14.03,6.06 12.75,4.61 12.75,4.61L12,3.77Z"/></svg>
                    Rainfall & Feasibility
                </h4>
                <div class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                    <p>• Annual rainfall: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.rainfall_check.annual_mm} mm</span></p>
                    <p>• Annual rooftop harvest: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.rainfall_check.annual_harvest_liters.toLocaleString()} liters</span></p>
                    <p>• Annual demand: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.rainfall_check.annual_demand_liters.toLocaleString()} liters</span></p>
                    <p>• Coverage: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.rainfall_check.coverage_percent.toFixed(1)}%</span></p>
                    <p>• Feasibility: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.rainfall_check.feasibility}</span></p>
                </div>
            `;
            container.appendChild(rainfallCard);

            // 2. Soil, Infiltration & Groundwater Dashboard
            const soilCard = document.createElement('div');
            soilCard.className = 'space-y-4 rounded-lg border-2 border-green-200 bg-green-card p-4 sm:p-6 shadow-md transition-all duration-300 dark:border-green-800 dark:bg-background-dark/50 results-card';
            soilCard.innerHTML = `
                <h4 class="text-lg font-bold mb-2 flex items-center gap-2 text-green-600 dark:text-green-400">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.5l-4-4h2v-8h4v8h2l-4 4z"/></svg>
                    Soil & Groundwater
                </h4>
                <div class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                    <p>• Soil type: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.infiltration_check.soil_type}</span></p>
                    <p>• Infiltration: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.infiltration_check.infiltration}</span></p>
                    <p>• Groundwater depth: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.groundwater_check.groundwater_depth !== null ? apiData.groundwater_check.groundwater_depth.toFixed(2) + ' m' : 'Data not available'}</span></p>
                </div>
            `;
            container.appendChild(soilCard);

            // 3. Recommendation & Structure Design Dashboard
            const rechargeStructures = apiData.structure_design.recharge.map(s => {
                if (s.structure_type === 'deep_well') {
                    return `Deep Well (${s.note})`;
                }
                return `${s.structure_type} (${s.volume_m3.toLocaleString()} m³)`;
            }).join(', ');

            const recommendationCard = document.createElement('div');
            recommendationCard.className = 'space-y-4 rounded-lg border-2 border-orange-200 bg-orange-card p-4 sm:p-6 shadow-md transition-all duration-300 dark:border-orange-800 dark:bg-background-dark/50 results-card';
            recommendationCard.innerHTML = `
                <h4 class="text-lg font-bold mb-2 flex items-center gap-2 text-orange-600 dark:text-orange-400">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                    Recommendation & Design
                </h4>
                <div class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                    <p>• Recommended System: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.combined_check.final_recommendation}</span></p>
                    <p>• Recommended Tank Volume: <span class="font-semibold text-text-light dark:text-text-dark">${apiData.structure_design.tank.volume_m3.toLocaleString()} m³</span></p>
                    <p>• Recharge Structures: <span class="font-semibold text-text-light dark:text-text-dark">${rechargeStructures}</span></p>
                </div>
            `;
            container.appendChild(recommendationCard);

            // 4. Economics Dashboard
            const economicsCard = document.createElement('div');
            economicsCard.className = 'space-y-4 rounded-lg border-2 border-purple-200 bg-purple-card p-4 sm:p-6 shadow-md transition-all duration-300 dark:border-purple-800 dark:bg-background-dark/50 results-card';
            economicsCard.innerHTML = `
                <h4 class="text-lg font-bold mb-2 flex items-center gap-2 text-purple-600 dark:text-purple-400">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/></svg>
                    Economics
                </h4>
                <div class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                    <p>• Estimated Construction Cost: <span class="font-semibold text-text-light dark:text-text-dark">₹${apiData.economics.construction_cost_inr.toLocaleString()}</span></p>
                    <p>• Annual Savings: <span class="font-semibold text-text-light dark:text-text-dark">₹${apiData.economics.annual_monetary_savings_inr.toLocaleString()}</span></p>
                    <p>• Cost-Benefit Ratio (CBR): <span class="font-semibold text-text-light dark:text-text-dark">${apiData.economics.cost_benefit_ratio_percent !== 'N/A' ? apiData.economics.cost_benefit_ratio_percent + '%' : 'N/A'}</span></p>
                </div>
            `;
            container.appendChild(economicsCard);
        }

        function toggleMobileMenu() {
            const overlay = document.getElementById('mobile-menu-overlay');
            const menu = document.getElementById('mobile-menu');
            
            if (menu.classList.contains('translate-x-full')) {
                menu.classList.remove('translate-x-full');
                overlay.classList.remove('opacity-0', 'invisible');
            } else {
                menu.classList.add('translate-x-full');
                overlay.classList.add('opacity-0', 'invisible');
            }
        }

        function showSuccessMessage() {
            const message = document.createElement('div');
            message.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            message.innerHTML = `
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    Calculation Complete!
                </div>
            `;
            document.body.appendChild(message);
            setTimeout(() => {
                message.classList.remove('translate-x-full');
            }, 100);
            setTimeout(() => {
                message.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(message);
                }, 300);
            }, 3000);
        }

        function showModal(title, message) {
            const modalHTML = `
                <div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-80">
                        <h3 class="text-xl font-bold mb-4">${title}</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-6">${message}</p>
                        <button onclick="closeModal()" class="w-full bg-primary text-white font-bold py-2 px-4 rounded-lg">OK</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeModal() {
            const modal = document.getElementById('custom-modal');
            if (modal) {
                modal.remove();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('calculator-form');
            if (form) {
                form.addEventListener('submit', calculateAdvancedRainwaterHarvesting);
            }
        });
    </script>
</body>
</html>